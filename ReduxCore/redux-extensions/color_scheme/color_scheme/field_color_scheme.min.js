(function(a){a.redux=a.redux||{};a(document).ready(function(){a.redux.color_scheme();var g=a(".redux-color-scheme-container").data("nonce");var j=a(".redux-color-scheme-container").data("id");var d=a(".redux-color-scheme-container").data("dev-mode");if(d==true){var h=a(".redux-color-scheme-container").data("version");var c=a("div.redux-timer").html();a("div.redux-timer").html(c+"<br/>Color Scheme extension v."+h)}a("input.redux-scheme-input-"+j).click(function(k){this.focus();this.select();k.preventDefault()});a("input.redux-scheme-input-"+j).val(a("#redux-scheme-select-"+j).val());a("#redux-scheme-select-"+j).on("change",function(){e()});var b=a("#redux-"+j+"-import-scheme-button");var i=a("#redux-"+j+"-import-scheme-button").data("submit");b.upload({name:"file",method:"post",action:i+"attachment.php",enctype:"multipart/form-data",fileType:".json",params:{type:"import",field_id:j},autoSubmit:true,onSubmit:function(){},onComplete:function(k){k=JSON.parse(k);a("#redux-"+j+"-scheme-message-notice h2").html(k.data);a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();if(true===k.result){window.onbeforeunload="";location.reload()}return false})},onSelect:function(){}});a("#redux-"+j+"-delete-scheme-button").click(function(l){l.preventDefault();var k=a("#redux-scheme-select-"+j).val();if(k.toLowerCase()==="default"){a("#redux-"+j+"-scheme-message-notice h2").html("Cannot delete the <strong>Default</strong> scheme, as it is reserved.");a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();return false});return false}a.blockUI({message:a("#redux-"+j+"-delete-scheme-question"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-delete-scheme-yes").click(function(){if(k){var m={action:"redux_color_schemes",nonce:g,type:"delete",scheme_id:k,field_id:j};var n=a("#redux-"+j+"-scheme-wait-message h1").html();a.blockUI({message:"<h1>"+n+"deleting scheme.<h1/>",theme:false,css:{width:"500px",padding:"5px"}});a.post(redux_ajax_script.ajaxurl,m,function(o){if(o==="success"){a("#redux-scheme-select-"+j+" option[value='"+k+"']").remove();a("#redux-scheme-select-"+j).find('option:contains("Default")').attr("selected",true);a("input.redux-scheme-input-"+j).val("");a("#redux-"+j+"-scheme-message-notice h2").html("The <strong>"+k+"</strong> scheme has been removed.<br/><br/>The color table has been reset to default values.");a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();f(0);return false})}else{a("#redux-"+j+"-scheme-message-notice h2").html("Delete failed: "+o);a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();return false})}})}});a("#redux-"+j+"-delete-scheme-no").click(function(){a.unblockUI();return false})});a("#redux-"+j+"-save-scheme-button").click(function(n){n.preventDefault();var m=a("input.redux-scheme-input-"+j).val();m=m.replace(/^\s+|\s+$/gm,"");m=m.replace(/[^a-z0-9\s\_\-]/gi,"");if(m===""){return false}if(m.toLowerCase()==="default"){a("#redux-"+j+"-scheme-message-notice h2").html("The name <strong>Default</strong> cannot be used as it is reserved.");a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();return false});return false}var l=[];a(".redux-scheme-layout-container").each(function(){var v=a(this).children(".redux-color-scheme").data("title");var w=a(this).children(".redux-color-scheme").data("id");var s=a(this).children(".redux-hidden-color").attr("value");var t=a(this).children(".redux-hidden-alpha").attr("value");var q=a(this).children(".redux-hidden-selector").attr("value");var u=a(this).children(".redux-hidden-mode").attr("value");var r=a(this).children(".redux-hidden-important").attr("value");l.push({id:w,title:v,color:s,alpha:t,selector:q,mode:u,important:r})});var k=a(".redux-scheme-input-"+j).val();if(k){var o={action:"redux_color_schemes",nonce:g,type:"save",scheme_name:k,scheme_data:l,field_id:j};var p=a("#redux-"+j+"-scheme-wait-message h1").html();a.blockUI({message:"<h1>"+p+"saving scheme.</h1>",theme:false,css:{width:"500px",padding:"5px"}});a.post(redux_ajax_script.ajaxurl,o,function(q){a("#redux-scheme-select-"+j).replaceWith(q);a("#redux-scheme-select-"+j).on("change",function(){e()});a("#redux-"+j+"-scheme-message-notice h2").html("The scheme <strong>"+k+"</strong> has been added to your scheme list.");a.blockUI({message:a("#redux-"+j+"-scheme-message-notice"),theme:false,css:{width:"500px",padding:"5px"}});a("#redux-"+j+"-scheme-ok").click(function(){a.unblockUI();return false})})}});function e(){a("ul.redux-scheme-layout").fadeOut();var k=a("#redux-scheme-select-"+j).val();a("#redux-scheme-select-"+j+" option[value='']").remove();a("input.redux-scheme-input-"+j).val(k);f(k)}function f(k){var n=a("#redux-"+j+"-scheme-wait-message h1").html();a.blockUI({message:"<h1>"+n+"updating scheme.</h1>",theme:false,css:{width:"500px",padding:"5px"}});var l=a(".redux-color-scheme").attr("class");var m={action:"redux_color_schemes",nonce:g,type:"update",scheme_id:k,field_id:j,field_class:l};a.post(redux_ajax_script.ajaxurl,m,function(o){a("ul.redux-scheme-layout").replaceWith(o);a.redux.color_scheme();a("ul.redux-scheme-layout").fadeIn();a.unblockUI();redux_change(a(this))})}});a.redux.color_scheme=function(){var e=a(".redux-color-scheme-container").data("id");var s=a(".redux-color-scheme");var u=s.data("current-alpha");u=Number((u===null||u===undefined)?1:u);var g=s.data("current-color");g=(g==="")?"":g;var k=a(".redux-color-scheme-container");var r=k.data("palette");r=decodeURIComponent(r);r=JSON.parse(r);if(r===null){r=[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d9ead3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]]}var t=k.data("show-input");t=Boolean((t=="")?false:t);var i=k.data("show-initial");i=Boolean((i=="")?false:i);var m=k.data("show-alpha");m=Boolean((m=="")?false:m);var n=k.data("allow-empty");n=Boolean((n=="")?false:n);var p=k.data("show-palette");p=Boolean((p=="")?false:p);var d=k.data("show-palette-only");d=Boolean((d=="")?false:d);var j=k.data("show-selection-palette");j=Boolean((j=="")?false:j);var c=Number(k.data("max-palette-size"));var q=k.data("clickout-fires-change");q=Boolean((q=="")?false:q);var b=String(k.data("choose-text"));var h=String(k.data("cancel-text"));var o=k.data("show-buttons");o=Boolean((o=="")?false:o);var f=String(k.data("container-class"));var l=String(k.data("replacer-class"));s.spectrum({color:"#ffffff",showAlpha:m,showInput:t,allowEmpty:n,className:"redux-full-spectrum",showInitial:i,showPalette:p,showSelectionPalette:j,maxPaletteSize:c,showPaletteOnly:d,clickoutFiresChange:q,chooseText:b,cancelText:h,showButtons:o,containerClassName:f,replacerClassName:l,preferredFormat:"hex6",localStorageKey:"redux.spectrum."+e,palette:r,change:function(w){var x,v;if(w===null){x=null;v=null}else{x=w.toHexString();v=w.alpha}a("input#"+a(this).data("block-id")+"-color").val(x);a("input#"+a(this).data("block-id")+"-alpha").val(v);redux_change(a(this).parents(".redux-field-container:first").find("input"))},move:function(v){},show:function(){},beforeShow:function(){},hide:function(v){},})}})(jQuery);